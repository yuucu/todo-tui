---
description: 
globs: 
alwaysApply: false
---
# Go Table Driven Tests (TDT) ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

Todo TUIãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚‹éš›ã¯ã€Goã®Table Driven Testsï¼ˆTDTï¼‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¾“ã£ã¦ãã ã•ã„ã€‚

## ğŸ“š å‚è€ƒå®Ÿè£…ä¾‹

æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§TDTãŒé©åˆ‡ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ä¾‹ï¼š
- [pkg/ui/list_test.go](mdc:pkg/ui/list_test.go) - styleTaskContentInternalé–¢æ•°ã®ãƒ†ã‚¹ãƒˆ
- [pkg/domain/task_test.go](mdc:pkg/domain/task_test.go) - ShouldMoveToCompletedé–¢æ•°ã®ãƒ†ã‚¹ãƒˆ  
- [pkg/ui/model_test.go](mdc:pkg/ui/model_test.go) - cyclePriorityé–¢æ•°ã®ãƒ†ã‚¹ãƒˆ
- [pkg/ui/config_test.go](mdc:pkg/ui/config_test.go) - ExpandHomePathé–¢æ•°ã®ãƒ†ã‚¹ãƒˆ

## ğŸ”§ TDTåŸºæœ¬æ§‹é€ 

### æ¨™æº–çš„ãªTDTãƒ‘ã‚¿ãƒ¼ãƒ³

```go
func TestFunctionName(t *testing.T) {
    tests := []struct {
        name        string
        input       InputType
        expected    ExpectedType
        description string // æ—¥æœ¬èªã§ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®èª¬æ˜
    }{
        {
            name:        "test_case_name",
            input:       inputValue,
            expected:    expectedValue,
            description: "ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®èª¬æ˜",
        },
        // è¿½åŠ ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹...
    }

    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            result := FunctionToTest(tt.input)
            if result != tt.expected {
                t.Errorf("FunctionToTest() = %v, expected %v for %s", 
                    result, tt.expected, tt.description)
            }
        })
    }
}
```

## ğŸ“‹ TDTãƒ«ãƒ¼ãƒ«

### 1. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å‘½å
- `name`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã¯**snake_case**ã‚’ä½¿ç”¨
- å…·ä½“çš„ã§ç†è§£ã—ã‚„ã™ã„åå‰ã‚’ä»˜ã‘ã‚‹
- ä¾‹: `"complete_incomplete_task"`, `"priority_A_to_B"`

### 2. æ§‹é€ ä½“ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- `name`: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹åï¼ˆå¿…é ˆï¼‰
- `description`: æ—¥æœ¬èªã§ã®èª¬æ˜ï¼ˆå¿…é ˆï¼‰
- å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç”¨ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- `expected`: æœŸå¾…ã•ã‚Œã‚‹çµæœ
- å¿…è¦ã«å¿œã˜ã¦è¿½åŠ ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

### 3. æ—¥æœ¬èªã‚³ãƒ¡ãƒ³ãƒˆ
- `description`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã¯æ—¥æœ¬èªã§åˆ†ã‹ã‚Šã‚„ã™ã„èª¬æ˜ã‚’è¨˜è¼‰
- ãƒ†ã‚¹ãƒˆã®æ„å›³ãŒæ˜ç¢ºã«ãªã‚‹ã‚ˆã†ã«ã™ã‚‹

### 4. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
```go
t.Errorf("FunctionName() = %v, expected %v for %s", 
    actual, expected, tt.description)
```

### 5. å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆ
```go
{
    name:        "boundary_condition_max",
    input:       maxValue,
    expected:    expectedResult,
    description: "æœ€å¤§å€¤ã§ã®å¢ƒç•Œãƒ†ã‚¹ãƒˆ",
},
{
    name:        "boundary_condition_min", 
    input:       minValue,
    expected:    expectedResult,
    description: "æœ€å°å€¤ã§ã®å¢ƒç•Œãƒ†ã‚¹ãƒˆ",
},
```

## âš ï¸ æ³¨æ„ç‚¹

### ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆ
```go
{
    name:           "invalid_input_error",
    input:          invalidInput,
    expectedError:  true,
    expectedResult: nil,
    description:    "ç„¡åŠ¹ãªå…¥åŠ›ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹",
},
```

### è¤‡é›‘ãªã‚±ãƒ¼ã‚¹
æ™‚é–“ã‚„æ—¥ä»˜ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã®å ´åˆï¼š
```go
{
    name:           "time_based_test",
    input:          inputValue,
    now:            time.Date(2025, 5, 31, 21, 0, 0, 0, time.UTC),
    expected:       expectedValue,
    description:    "ç‰¹å®šæ™‚åˆ»ã§ã®å‡¦ç†ãƒ†ã‚¹ãƒˆ",
},
```

## ğŸš€ å®Ÿè£…æ™‚ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] æ­£å¸¸ç³»ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å«ã‚€
- [ ] ç•°å¸¸ç³»ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å«ã‚€  
- [ ] å¢ƒç•Œå€¤ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å«ã‚€
- [ ] å„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«é©åˆ‡ãª`name`ã¨`description`ãŒã‚ã‚‹
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«`tt.description`ã‚’å«ã‚ã‚‹
- [ ] `t.Run(tt.name, ...)`ã§ã‚µãƒ–ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
- [ ] å¿…è¦ã«å¿œã˜ã¦ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ä½œæˆ

## ğŸ“– ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **æ˜ç¢ºãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å**: ãƒ†ã‚¹ãƒˆã®å†…å®¹ãŒåå‰ã‹ã‚‰åˆ†ã‹ã‚‹ã‚ˆã†ã«ã™ã‚‹
2. **åŒ…æ‹¬çš„ãªã‚«ãƒãƒ¬ãƒƒã‚¸**: æ­£å¸¸ç³»ã€ç•°å¸¸ç³»ã€å¢ƒç•Œå€¤ã‚’ç¶²ç¾…
3. **èª­ã¿ã‚„ã™ã•**: ä»–ã®é–‹ç™ºè€…ãŒç†è§£ã—ã‚„ã™ã„æ§‹é€ ã«ã™ã‚‹
4. **ä¿å®ˆæ€§**: æ–°ã—ã„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ç°¡å˜ã«è¿½åŠ ã§ãã‚‹æ§‹é€ ã«ã™ã‚‹
5. **å®Ÿç”¨çš„ãªã‚³ãƒ¡ãƒ³ãƒˆ**: `description`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§æ„å›³ã‚’æ˜ç¢ºã«ã™ã‚‹

ã“ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«å¾“ã£ã¦ã€ä¸€è²«æ€§ã®ã‚ã‚‹é«˜å“è³ªãªãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ç¶­æŒã—ã¦ãã ã•ã„ã€‚
